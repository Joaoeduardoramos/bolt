{% set attributes = create_attribute(attributes|default({})) %}
{% set base_class = "c-bolt-li" %}

{% set classes = [
  "#{base_class}",
  type ? "#{base_class}--#{type}-item",
  last ? "#{base_class}--last-item",
] %}

{% if nested %}
  {% if index == 1 %}
    <bolt-li {{ attributes }} role="presentation">
      <replace-with-grandchildren role="presentation">
        <div class="{{ classes|join(" ") }}" role="listitem">
  {% endif %}
  {{ children }}
  {% if length == index %}
        </div>
      </replace-with-grandchildren>
    </bolt-li>
  {% endif %}
{% else %}
  <bolt-li {{ attributes }} role="presentation">
    <replace-with-grandchildren role="presentation">
      <div class="{{ classes|join(" ") }}" role="listitem">
        {{ children }}
      </div>
    </replace-with-grandchildren>
  </bolt-li>
{% endif %}
