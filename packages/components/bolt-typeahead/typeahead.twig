{% set selectors = get_data("@bolt-components-typeahead/typeahead.scoped.json") %}

{% set classNames = {
  clearIcon: selectors["c-bolt-typeahead__clear-icon"],
  clearButton: selectors["c-bolt-typeahead__clear-button"],
  input: selectors["c-bolt-typeahead__input"],
  inputWrapper: selectors["c-bolt-typeahead__input-wrapper"]
} %}

{% set utils = {
  visuallyHidden: "u-bolt-visuallyhidden",
  hidden: "u-bolt-hidden"
} %}

{% set text = {
  label: "Search",
  clearInput: "Clear search input",
  inputPlaceholder: "Search for..."
} %}

{% set data = {
  uuid: "bolt-typeahead-uuid"
} %}

{% set attributes = create_attribute(attributes|default({})) %}


<bolt-typeahead {{ attributes }} placeholder="{{ text.inputPlaceholder }}">
  <form class="{{ classNames.inputWrapper }}">
    <label for="{{ data.uuid }}">
      <span class="{{ utils.visuallyHidden }}"></span>
      <input
        id="{{ data.uuid }}"
        type="text"
        autocomplete="off"
        aria-autocomplete="list"
        class="{{ classNames.input }}"
        placeholder="{{ text.inputPlaceholder }}"
        required
      />
      <button class="{{ classNames.clearButton }}" type="reset" onclick="this.previousElementSibling.focus()">
        <div class="{{ utils.visuallyHidden }}">{{ text.clearInput }}</div>
        {% include "@bolt-components-icon/icon.twig" with {
          attributes: {
            class: [
              classNames.clearIcon
            ]
          },
          title: text.clearInput,
          name: "close",
          fallback: true,
        } only %}
      </button>
    </label>
    <input type="submit" class="{{ utils.hidden }}" />
  </form>
</bolt-typeahead>
