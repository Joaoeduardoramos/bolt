{% if enable_json_schema_validation %}
  {{ validate_data_schema(bolt.data.components['@bolt-components-icon'].schema, _self) | raw }}
{% endif %}

{% set attributes = create_attribute(attributes | default({})) %}

{% set attributes = attributes
  .setAttribute("name", name)
  .setAttribute("background", background)
  .setAttribute("size", size)
  .setAttribute("color", color)
  .setAttribute("title", title)
%}

<bolt-icon {{ attributes }}>{% spaceless %}
  {% if fallback %}
    {% set svgIcon %}
      {% include "@bolt-components-icons/#{name}.min.svg" %}
    {% endset %}

    {{ svgIcon
      | replace('/fill="((?!.*(none|#FFFFFF))[^"]+)"/', 'fill="var(--bolt-theme-icon, currentColor)"')
      | replace('fill="#FFFFFF', 'fill="rgba(var(--bolt-theme-background), 1)"')
      | replace('<svg ', '<svg ' ~ 'class="' ~ attributes.class ~ '"')
      | replace('/<!--(.*)-->/Uis', '')
      | replace('/height="([^"]+)"/', '')
      | replace('/width="([^"]+)"/', '')
      | replace('/<desc>([^<]+)/', '')
      | replace('</desc>', '')
      | replace('<defs></defs>', '')
      | replace('<path d="M0 0h24v24H0z"/>', '')
    }}
  {% endif %}
{% endspaceless %}</bolt-icon>
