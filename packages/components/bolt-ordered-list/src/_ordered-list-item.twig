{% set item_attributes = create_attribute({}) %}

{% set base_class = "c-bolt-ordered-list-item" %}

{% set last = loop.last %}
{% set classes = [
  "#{base_class}-spacing",
  last ? "#{base_class}--last-item",
] %}

{% if item.text %}
  {% set item = item.text %}
{% endif %}

<bolt-ordered-list-item
  {% if last %} last {% endif %}
>
  <replace-with-grandchildren>
    {#<li {{ item_attributes.addClass(classes) }}>#}
      {#{% if item is iterable %}#}
        {#{% for i in item %}#}
          {#{{ i }}#}
        {#{%  endfor %}#}
      {#{% else %}#}
        {#{{ item }}#}
      {#{% endif %}#}
    {#</li>#}
    <li class="{{ "#{base_class}" }}">
      {% if item is iterable %}
        {% for i in item %}
          {% set inner_item_attributes = create_attribute({}) %}
          {% set last_i = loop.last %}
          {% set inner_classes = [
            "#{base_class}-spacing",
            last_i ? "#{base_class}--last-item",
          ] %}
          <div {{ inner_item_attributes.addClass(inner_classes) }}>{{ i }}</div>
        {%  endfor %}
      {% else %}
        <div {{ item_attributes.addClass(classes) }}>{{ item }}</div>
      {% endif %}
    </li>
  </replace-with-grandchildren>
</bolt-ordered-list-item>
