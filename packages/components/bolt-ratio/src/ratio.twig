{% set attributes = create_attribute(attributes | default({})) %}

{% set ratioW = aspectRatioWidth ?? ratio|split("/")[0] ?? "1" %}
{% set ratioH = aspectRatioHeight ?? ratio|split("/")[1] ?? "1" %}

{% if ratioH and ratioW %}
  {% set attributes = attributes.setAttribute("ratio", "#{ratioW}/#{ratioH}") %}
  {% set existing_styles = attributes.style ?? [] %}
  {% set attributes = attributes.setAttribute("style", existing_styles | merge([
    "padding-bottom: calc(#{ratioH} / #{ratioW} * 100%);",
    "--aspect-ratio: #{ratioW}/#{ratioH}",
  ])) %}

{% endif %}

<bolt-ratio {{ attributes }}>
  {% block ratio_content %}
    {{ children }}
  {% endblock %}
</bolt-ratio>