/* ------------------------------------ *\
   Global Search
\* ------------------------------------ */

@import '@bolt/core';

$bolt-global-search-input-placeholder-color: bolt-theme(text, 0.4);
$bolt-global-search-input-border-width: $bolt-border-width;
$bolt-global-search-input-border-style: $bolt-border-style;
$bolt-global-search-icon-only-button-width: bolt-spacing(medium) + 1rem;

.c-bolt-global-search-bar {
  @include bolt-shadow('level-10');

  display: flex;
  flex-wrap: nowrap;
  border-radius: bolt-border-radius(small);
  transition: all $bolt-transition;

  &[class*='t-bolt'] {
    background-color: transparent;
  }
}

.c-bolt-global-search-bar__label {
  @include bolt-visuallyhidden;
}

.c-bolt-global-search-bar__input {
  @include bolt-padding(medium, squished);
  @include bolt-padding-right(small);

  flex: 1;
  order: 1;
  appearance: none;
  opacity: bolt-opacity(100);
  padding-left: $bolt-global-search-icon-only-button-width;
  color: bolt-theme(text);
  border-radius: bolt-border-radius(small);
  border-width: $bolt-global-search-input-border-width;
  border-style: $bolt-global-search-input-border-style;
  outline: none;
  transition: all $bolt-transition;

  @at-root .c-bolt-global-search-bar[class*='t-bolt'] #{&} {
    border-color: bolt-theme(link, 0.2);
    background-color: bolt-theme(background);

    &:focus {
      border-color: rgba(bolt-color(indigo, light), 0.8);
      box-shadow: 0 0 0 3px rgba(bolt-color(gray, light), 0.4);
    }
  }

  @at-root .c-bolt-global-search-bar:not([class*='t-bolt']) #{&} {
    border-color: bolt-theme(link, 0.2);
    background-color: rgba(bolt-color(white), 0.1);

    &:focus {
      border-color: bolt-theme(link, 0.8);
      box-shadow: 0 0 0 3px bolt-theme(link, 0.2);
    }
  }

  &::-webkit-input-placeholder { /* Chrome/Opera/Safari */
    color: $bolt-global-search-input-placeholder-color;
  }

  &::-moz-placeholder { /* Firefox 19+ */
    color: $bolt-global-search-input-placeholder-color;
  }

  &:-ms-input-placeholder { /* IE 10+ */
    color: $bolt-global-search-input-placeholder-color;
  }

  &:-moz-placeholder { /* Firefox 18- */
    color: $bolt-global-search-input-placeholder-color;
  }

  &:valid {
    padding-right: $bolt-global-search-icon-only-button-width;
  }
}

.c-bolt-global-search-bar__button {
  order: 0;
  width: 0;
}

.c-bolt-global-search-bar__button--reset {
  order: 2;
  transform: translateX($bolt-global-search-icon-only-button-width * -1);

  @at-root .c-bolt-global-search-bar__input:not(:valid) ~ #{&} {
    display: none;
  }
}
